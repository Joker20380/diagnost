{% extends 'diagnost/base.html' %}
{% load static i18n %}

{% block description %}
{% trans "Upload a vehicle diagnostic report for structured analysis and recommendations." %}
{% endblock %}
{% block title %}{% trans "Upload diagnostics" %}{% endblock %}

{% block content %}
<div class="top-shadow"></div>

<div class="inner-page">
  <div class="slider-item" style="background-image: url('{% static 'images/industrial_hero_3.jpg' %}');">
    <div class="container">
      <div class="row slider-text align-items-center justify-content-center">
        <div class="col-md-8 text-center col-sm-12 element-animate pt-5">
          <h1 class="pt-5"><span>{% trans "Upload diagnostics" %}</span></h1>
          <p class="mb-5 w-75 mx-auto">
            {% trans "Upload a diagnostic report to generate a structured analysis and preliminary recommendations." %}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<section class="section">
  <div class="container">
    <div class="row justify-content-center">

      <div class="col-lg-7 col-md-9 element-animate">

        <div class="p-4 p-md-5 bg-white border rounded" style="box-shadow: 0 8px 24px rgba(0,0,0,.06);">
          <div class="mb-4 text-center">
            <h2 class="h4 mb-2">{% trans "Upload your report" %}</h2>
            <p class="text-muted mb-0">
              {% trans "The uploaded file will be processed automatically. Diagnostic data is used exclusively for analysis and is not shared with third parties." %}
            </p>
          </div>

          <form method="post" enctype="multipart/form-data" id="diagnostic_upload_form" class="mt-4">
            {% csrf_token %}

            {% if form.non_field_errors %}
              <div class="alert alert-danger">
                {{ form.non_field_errors }}
              </div>
            {% endif %}

            <div class="form-group mb-3">
              <label class="form-label" for="{{ form.vin.id_for_label }}">
                {% trans "Vehicle VIN" %}
              </label>
              {{ form.vin }}
              {% if form.vin.help_text %}
                <small class="form-text text-muted">{{ form.vin.help_text }}</small>
              {% endif %}
              {% for error in form.vin.errors %}
                <div class="text-danger small">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-3">
              <label class="form-label" for="{{ form.vehicle_model.id_for_label }}">
                {% trans "Vehicle model" %}
              </label>
              {{ form.vehicle_model }}
              {% if form.vehicle_model.help_text %}
                <small class="form-text text-muted">{{ form.vehicle_model.help_text }}</small>
              {% endif %}
              {% for error in form.vehicle_model.errors %}
                <div class="text-danger small">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group mb-4">
              <label class="form-label" for="{{ form.raw_file.id_for_label }}">
                {% trans "Diagnostic report file" %}
              </label>
              {{ form.raw_file }}
              {% for error in form.raw_file.errors %}
                <div class="text-danger small">{{ error }}</div>
              {% endfor %}

              <small class="form-text text-muted">
                {% trans "Supported formats: Launch X431 diagnostic reports. Maximum file size depends on system limits." %}
              </small>
            </div>

            <div class="d-flex flex-wrap justify-content-center gap-2 mt-4">
              <button type="submit" class="btn btn-primary px-4 py-2">
                {% trans "Upload and analyze" %}
              </button>

              <a href="{% url 'index' %}" class="btn btn-outline-secondary px-4 py-2">
                {% trans "Back to home" %}
              </a>
            </div>

            <p class="mt-4 small text-muted text-center mb-0">
              {% trans "The analysis result will be available after processing. Final conclusions must be confirmed during technician inspection." %}
            </p>

          </form>
        </div>

      </div>

    </div>
  </div>
</section>

{% endblock %}
